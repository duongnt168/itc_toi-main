# ITC TOI - E-commerce Website

D·ª± √°n website th∆∞∆°ng m·∫°i ƒëi·ªán t·ª≠ ƒë∆∞·ª£c x√¢y d·ª±ng b·∫±ng PHP v·ªõi Smarty Template Engine.

## Y√™u c·∫ßu h·ªá th·ªëng

- PHP 7.4 ho·∫∑c cao h∆°n
- MySQL 5.7 ho·∫∑c cao h∆°n
- Apache/Nginx web server
- Composer

## C√†i ƒë·∫∑t

### 1. Clone repository

```bash
git clone https://github.com/duongnt168/itc_toi-main.git
cd itc_toi-main
```

### 2. C√†i ƒë·∫∑t dependencies

```bash
composer install
```

### 3. C·∫•u h√¨nh database

1. Copy file c·∫•u h√¨nh m·∫´u:
   ```bash
   cp config/database.example.php config/database.php
   ```

2. Ch·ªânh s·ª≠a `config/database.php` v·ªõi th√¥ng tin database c·ªßa b·∫°n:
   ```php
   return [
       'host' => 'localhost',
       'username' => 'your_username',
       'password' => 'your_password',
       'database' => 'your_database_name',
       'charset' => 'utf8mb4',
       'port' => 3306
   ];
   ```

3. Import database:
   ```bash
   mysql -u username -p database_name < database.sql
   ```

### 4. C·∫•u h√¨nh Stripe (thanh to√°n)

1. Copy file c·∫•u h√¨nh m·∫´u:
   ```bash
   cp config/stripe.example.php config/stripe.php
   ```

2. Ch·ªânh s·ª≠a `config/stripe.php` v·ªõi API keys t·ª´ Stripe Dashboard:
   ```php
   return [
       'secret_key' => 'sk_test_your_secret_key',
       'publishable_key' => 'pk_test_your_publishable_key',
       'currency' => 'vnd',
       'webhook_secret' => 'your_webhook_secret'
   ];
   ```

### 5. C·∫•u h√¨nh web server

ƒê·∫£m b·∫£o document root tr·ªè ƒë·∫øn th∆∞ m·ª•c g·ªëc c·ªßa project v√† mod_rewrite ƒë∆∞·ª£c b·∫≠t.

### 6. Ph√¢n quy·ªÅn th∆∞ m·ª•c

```bash
chmod 755 cache/
chmod 755 templates_c/
chmod 755 public/img/
```

## C·∫•u tr√∫c th∆∞ m·ª•c

```
‚îú‚îÄ‚îÄ config/          # File c·∫•u h√¨nh
‚îú‚îÄ‚îÄ controller/      # Controllers
‚îú‚îÄ‚îÄ model/          # Models
‚îú‚îÄ‚îÄ templates/      # Smarty templates
‚îú‚îÄ‚îÄ public/         # Assets (CSS, JS, images)
‚îú‚îÄ‚îÄ vendor/         # Composer dependencies
‚îú‚îÄ‚îÄ cache/          # Cache files
‚îî‚îÄ‚îÄ templates_c/    # Compiled templates
```

## T√≠nh nƒÉng ch√≠nh

- Qu·∫£n l√Ω s·∫£n ph·∫©m v√† danh m·ª•c
- Gi·ªè h√†ng v√† thanh to√°n
- Qu·∫£n l√Ω ƒë∆°n h√†ng
- H·ªá th·ªëng ƒë√°nh gi√° s·∫£n ph·∫©m
- Qu·∫£n l√Ω khi·∫øu n·∫°i
- T√≠ch h·ª£p thanh to√°n Stripe
- Panel qu·∫£n tr·ªã

## B·∫£o m·∫≠t

- C√°c file c·∫•u h√¨nh ch·ª©a th√¥ng tin nh·∫°y c·∫£m ƒë√£ ƒë∆∞·ª£c lo·∫°i tr·ª´ kh·ªèi git
- S·ª≠ d·ª•ng file `.example.php` l√†m template
- Kh√¥ng commit API keys ho·∫∑c th√¥ng tin database

## ƒê√≥ng g√≥p

1. Fork repository
2. T·∫°o feature branch
3. Commit changes
4. Push to branch
5. T·∫°o Pull Request

## License

MIT License

## üèóÔ∏è Ki·∫øn tr√∫c h·ªá th·ªëng

### C·∫•u tr√∫c th∆∞ m·ª•c
```
itc_toi-main/
‚îú‚îÄ‚îÄ config/                 # C·∫•u h√¨nh h·ªá th·ªëng
‚îÇ   ‚îú‚îÄ‚îÄ database.php       # C·∫•u h√¨nh database
‚îÇ   ‚îî‚îÄ‚îÄ stripe.php         # C·∫•u h√¨nh thanh to√°n Stripe
‚îú‚îÄ‚îÄ controller/            # Controllers x·ª≠ l√Ω logic
‚îÇ   ‚îú‚îÄ‚îÄ admin.php         # Qu·∫£n l√Ω admin panel
‚îÇ   ‚îú‚îÄ‚îÄ auth.php          # X√°c th·ª±c ng∆∞·ªùi d√πng
‚îÇ   ‚îú‚îÄ‚îÄ cart.php          # Qu·∫£n l√Ω gi·ªè h√†ng
‚îÇ   ‚îú‚îÄ‚îÄ order.php         # X·ª≠ l√Ω ƒë∆°n h√†ng
‚îÇ   ‚îú‚îÄ‚îÄ product.php       # Qu·∫£n l√Ω s·∫£n ph·∫©m
‚îÇ   ‚îú‚îÄ‚îÄ user.php          # Giao di·ªán ng∆∞·ªùi d√πng
‚îÇ   ‚îú‚îÄ‚îÄ newsletter.php    # Qu·∫£n l√Ω newsletter
‚îÇ   ‚îî‚îÄ‚îÄ unsubscribe.php   # H·ªßy ƒëƒÉng k√Ω
‚îú‚îÄ‚îÄ model/                # Models t∆∞∆°ng t√°c database
‚îÇ   ‚îú‚îÄ‚îÄ db.php           # Class k·∫øt n·ªëi database
‚îÇ   ‚îú‚îÄ‚îÄ users.php        # Qu·∫£n l√Ω ng∆∞·ªùi d√πng
‚îÇ   ‚îú‚îÄ‚îÄ products.php     # Qu·∫£n l√Ω s·∫£n ph·∫©m
‚îÇ   ‚îú‚îÄ‚îÄ orders.php       # Qu·∫£n l√Ω ƒë∆°n h√†ng
‚îÇ   ‚îú‚îÄ‚îÄ cart.php         # Qu·∫£n l√Ω gi·ªè h√†ng
‚îÇ   ‚îî‚îÄ‚îÄ ...              # C√°c model kh√°c
‚îú‚îÄ‚îÄ templates/            # Giao di·ªán Smarty
‚îÇ   ‚îú‚îÄ‚îÄ admin/           # Giao di·ªán admin
‚îÇ   ‚îú‚îÄ‚îÄ user/            # Giao di·ªán ng∆∞·ªùi d√πng
‚îÇ   ‚îú‚îÄ‚îÄ auth/            # Giao di·ªán ƒëƒÉng nh·∫≠p/ƒëƒÉng k√Ω
‚îÇ   ‚îî‚îÄ‚îÄ include/         # C√°c template chung
‚îú‚îÄ‚îÄ public/              # T√†i nguy√™n tƒ©nh
‚îÇ   ‚îú‚îÄ‚îÄ css/            # Stylesheets
‚îÇ   ‚îú‚îÄ‚îÄ img/            # H√¨nh ·∫£nh
‚îÇ   ‚îî‚îÄ‚îÄ admin/          # T√†i nguy√™n admin
‚îú‚îÄ‚îÄ library/            # Th∆∞ vi·ªán Smarty
‚îú‚îÄ‚îÄ vendor/             # Dependencies (Composer)
‚îî‚îÄ‚îÄ cache/              # Cache Smarty
```

## üöÄ T√≠nh nƒÉng ch√≠nh

### üë§ Qu·∫£n l√Ω ng∆∞·ªùi d√πng
- **ƒêƒÉng k√Ω/ƒêƒÉng nh·∫≠p** v·ªõi x√°c th·ª±c OTP qua email
- **Qu√™n m·∫≠t kh·∫©u** v·ªõi h·ªá th·ªëng reset password
- **Qu·∫£n l√Ω profile** ng∆∞·ªùi d√πng
- **Ph√¢n quy·ªÅn** admin/user
- **B·∫£o m·∫≠t** v·ªõi session management

### üõçÔ∏è Qu·∫£n l√Ω s·∫£n ph·∫©m
- **Danh m·ª•c s·∫£n ph·∫©m** v·ªõi ph√¢n lo·∫°i
- **S·∫£n ph·∫©m n·ªïi b·∫≠t** (Featured products)
- **Flash sale** v√† khuy·∫øn m√£i
- **Qu·∫£n l√Ω kho** (Stock management)
- **Upload h√¨nh ·∫£nh** s·∫£n ph·∫©m
- **T√¨m ki·∫øm v√† l·ªçc** s·∫£n ph·∫©m

### üõí Gi·ªè h√†ng v√† ƒë∆°n h√†ng
- **Gi·ªè h√†ng** v·ªõi session management
- **Thanh to√°n ƒëa ph∆∞∆°ng th·ª©c**:
  - Thanh to√°n khi nh·∫≠n h√†ng (COD)
  - Thanh to√°n qua Stripe (Credit Card)
  - Thanh to√°n QR Code
- **Qu·∫£n l√Ω ƒë·ªãa ch·ªâ giao h√†ng**
- **T√≠nh ph√≠ v·∫≠n chuy·ªÉn** theo t·ªânh/th√†nh ph·ªë
- **Theo d√µi tr·∫°ng th√°i ƒë∆°n h√†ng**

### üìä Qu·∫£n tr·ªã admin
- **Dashboard** v·ªõi th·ªëng k√™ t·ªïng quan
- **Qu·∫£n l√Ω ng∆∞·ªùi d√πng** (CRUD)
- **Qu·∫£n l√Ω s·∫£n ph·∫©m** (CRUD)
- **Qu·∫£n l√Ω ƒë∆°n h√†ng** v√† c·∫≠p nh·∫≠t tr·∫°ng th√°i
- **Qu·∫£n l√Ω ƒë√°nh gi√°** s·∫£n ph·∫©m
- **B√°o c√°o** doanh thu v√† th·ªëng k√™

### üîÑ T√≠nh nƒÉng n√¢ng cao
- **H·ªá th·ªëng khi·∫øu n·∫°i** ƒë∆°n h√†ng
- **ƒê√°nh gi√° ƒë∆°n h√†ng** (delivery & service rating)
- **Y√™u c·∫ßu h·ªßy ƒë∆°n h√†ng**
- **Newsletter** v√† email marketing
- **Activity logs** theo d√µi ho·∫°t ƒë·ªông

## üõ†Ô∏è C√¥ng ngh·ªá s·ª≠ d·ª•ng

### Backend
- **PHP 7.4+** - Ng√¥n ng·ªØ l·∫≠p tr√¨nh ch√≠nh
- **MySQL** - H·ªá qu·∫£n tr·ªã c∆° s·ªü d·ªØ li·ªáu
- **Smarty Template Engine** - Template system
- **PHPMailer** - G·ª≠i email
- **Stripe PHP SDK** - Thanh to√°n online

### Frontend
- **HTML5/CSS3** - Giao di·ªán ng∆∞·ªùi d√πng
- **JavaScript** - T∆∞∆°ng t√°c client-side
- **Bootstrap** - Framework CSS (n·∫øu c√≥)
- **Responsive Design** - T∆∞∆°ng th√≠ch mobile

### C√¥ng c·ª• ph√°t tri·ªÉn
- **Composer** - Qu·∫£n l√Ω dependencies
- **XAMPP** - M√¥i tr∆∞·ªùng ph√°t tri·ªÉn
- **Git** - Qu·∫£n l√Ω version control

## üìä C∆° s·ªü d·ªØ li·ªáu

### C√°c b·∫£ng ch√≠nh
1. **users** - Th√¥ng tin ng∆∞·ªùi d√πng
2. **categories** - Danh m·ª•c s·∫£n ph·∫©m
3. **products** - S·∫£n ph·∫©m
4. **orders** - ƒê∆°n h√†ng
5. **order_items** - Chi ti·∫øt ƒë∆°n h√†ng
6. **cart** - Gi·ªè h√†ng
7. **reviews** - ƒê√°nh gi√° s·∫£n ph·∫©m
8. **order_complaints** - Khi·∫øu n·∫°i ƒë∆°n h√†ng
9. **order_reviews** - ƒê√°nh gi√° ƒë∆°n h√†ng
10. **order_cancellations** - Y√™u c·∫ßu h·ªßy ƒë∆°n h√†ng
11. **otp** - M√£ OTP x√°c th·ª±c
12. **activity_logs** - Nh·∫≠t k√Ω ho·∫°t ƒë·ªông

### Views v√† Indexes
- **product_stats** - Th·ªëng k√™ s·∫£n ph·∫©m
- **order_stats** - Th·ªëng k√™ ƒë∆°n h√†ng
- **complaint_stats** - Th·ªëng k√™ khi·∫øu n·∫°i
- **order_review_stats** - Th·ªëng k√™ ƒë√°nh gi√°

## ‚öôÔ∏è C√†i ƒë·∫∑t v√† c·∫•u h√¨nh

### Y√™u c·∫ßu h·ªá th·ªëng
- PHP >= 7.4
- MySQL >= 5.7
- Apache/Nginx web server
- Composer

### C√†i ƒë·∫∑t
1. **Clone repository**
   ```bash
   git clone [repository-url]
   cd itc_toi-main
   ```

2. **C√†i ƒë·∫∑t dependencies**
   ```bash
   composer install
   ```

3. **C·∫•u h√¨nh database**
   - Import file `database.sql` v√† `order_features.sql`
   - C·∫≠p nh·∫≠t th√¥ng tin database trong `config/database.php`

4. **C·∫•u h√¨nh email**
   - C·∫≠p nh·∫≠t th√¥ng tin SMTP trong `config.php`
   - C·∫•u h√¨nh Gmail App Password

5. **C·∫•u h√¨nh Stripe** (n·∫øu s·ª≠ d·ª•ng)
   - C·∫≠p nh·∫≠t API keys trong `config/stripe.php`

6. **Ph√¢n quy·ªÅn th∆∞ m·ª•c**
   ```bash
   chmod 755 cache/
   chmod 755 templates_c/
   ```

### C·∫•u h√¨nh web server
- Document root: `itc_toi-main/`
- URL rewriting: Apache mod_rewrite ho·∫∑c Nginx rewrite rules

## üîê B·∫£o m·∫≠t

### C√°c bi·ªán ph√°p b·∫£o m·∫≠t ƒë√£ tri·ªÉn khai
- **SQL Injection Protection** - Prepared statements
- **XSS Protection** - Input sanitization
- **CSRF Protection** - Token validation
- **Session Security** - Secure session management
- **Password Hashing** - bcrypt encryption
- **OTP Authentication** - Two-factor authentication
- **Input Validation** - Server-side validation

### C·∫•u h√¨nh b·∫£o m·∫≠t
- HTTPS enforcement (production)
- Secure headers
- File upload restrictions
- Rate limiting (c√≥ th·ªÉ th√™m)

## üìà Hi·ªáu su·∫•t

### T·ªëi ∆∞u h√≥a
- **Database Indexing** - Indexes cho c√°c c·ªôt th∆∞·ªùng query
- **Smarty Caching** - Template caching
- **Image Optimization** - Compressed images
- **Query Optimization** - Efficient SQL queries
- **Session Management** - Optimized session handling

### Monitoring
- **Activity Logs** - Track user activities
- **Error Logging** - PHP error logs
- **Database Logs** - Query performance monitoring

## üß™ Testing

### C√°c test case c·∫ßn thi·∫øt
- **Unit Tests** - Test c√°c functions v√† classes
- **Integration Tests** - Test database interactions
- **User Acceptance Tests** - Test user workflows
- **Security Tests** - Test vulnerabilities

## üìù API Documentation

### Endpoints ch√≠nh
- `/?c=auth&a=login` - ƒêƒÉng nh·∫≠p
- `/?c=auth&a=register` - ƒêƒÉng k√Ω
- `/?c=user&a=index` - Trang ch·ªß
- `/?c=cart&a=index` - Gi·ªè h√†ng
- `/?c=order&a=checkout` - Thanh to√°n
- `/?c=admin&a=dashboard` - Admin dashboard

## üöÄ Deployment

### Production Checklist
- [ ] C·∫•u h√¨nh HTTPS
- [ ] T·ªëi ∆∞u h√≥a database
- [ ] C·∫•u h√¨nh caching
- [ ] Backup strategy
- [ ] Monitoring setup
- [ ] Error handling
- [ ] Log rotation

### Environment Variables
```env
DB_HOST=localhost
DB_NAME=terrariumz
DB_USER=root
DB_PASS=
EMAIL_HOST=smtp.gmail.com
EMAIL_USER=your-email@gmail.com
EMAIL_PASS=your-app-password
STRIPE_SECRET_KEY=your-stripe-secret
STRIPE_PUBLISHABLE_KEY=your-stripe-public
```

## ü§ù ƒê√≥ng g√≥p

### Quy tr√¨nh ph√°t tri·ªÉn
1. Fork repository
2. T·∫°o feature branch
3. Commit changes
4. Push to branch
5. Create Pull Request

### Coding Standards
- PSR-4 Autoloading
- PSR-12 Coding Style
- Meaningful commit messages
- Code documentation

## üìÑ License

D·ª± √°n n√†y ƒë∆∞·ª£c ph√°t tri·ªÉn cho m·ª•c ƒë√≠ch h·ªçc t·∫≠p v√† nghi√™n c·ª©u.

## üë• T√°c gi·∫£

**AquaGarden Shop Team**
- Ph√°t tri·ªÉn: [T√™n developer]
- Thi·∫øt k·∫ø: [T√™n designer]
- Qu·∫£n l√Ω d·ª± √°n: [T√™n PM]

## üìû Li√™n h·ªá

- **Email**: support@aquagarden.com
- **Website**: https://aquagarden.com
- **GitHub**: [repository-url]

---

